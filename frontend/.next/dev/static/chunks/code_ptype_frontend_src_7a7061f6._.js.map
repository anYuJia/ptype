{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/lib/constants.ts"],"sourcesContent":["// 练习模式\nexport type TypingMode = 'english' | 'chinese' | 'coder';\n\n// 练习状态\nexport type TypingStatus = 'idle' | 'running' | 'finished';\n\n// 难度级别\nexport type DifficultyLevel = 'easy' | 'medium' | 'hard';\n\n// 中文文体类型\nexport type ChineseStyle = 'modern' | 'classical'; // 现代文 | 文言文\n\n// 编程语言类型\nexport type ProgrammingLanguage =\n    | 'python'\n    | 'javascript'\n    | 'typescript'\n    | 'c'\n    | 'cpp'\n    | 'java'\n    | 'go'\n    | 'dart'\n    | 'html'\n    | 'css'\n    | 'powershell'\n    | 'bash';\n\n// 英文选项\nexport interface EnglishOptions {\n    caseSensitive: boolean; // 区分大小写\n    ignorePunctuation: boolean; // 忽略标点符号\n}\n\n// 默认配置\nexport const DEFAULT_DURATION = 60; // 默认60秒\nexport const DEFAULT_MODE: TypingMode = 'english';\nexport const DEFAULT_DIFFICULTY: DifficultyLevel = 'medium';\nexport const DEFAULT_CHINESE_STYLE: ChineseStyle = 'modern';\nexport const DEFAULT_PROGRAMMING_LANGUAGE: ProgrammingLanguage = 'python';\nexport const DEFAULT_ENGLISH_OPTIONS: EnglishOptions = {\n    caseSensitive: false,\n    ignorePunctuation: false,\n};\n\n// 时间选项（秒）\nexport const DURATION_OPTIONS = [15, 30, 60, 120] as const;\n\n// 难度选项\nexport const DIFFICULTY_OPTIONS: DifficultyLevel[] = ['easy', 'medium', 'hard'];\n\n// 中文文体选项\nexport const CHINESE_STYLE_OPTIONS: ChineseStyle[] = ['modern', 'classical'];\n\n// 编程语言选项\nexport const PROGRAMMING_LANGUAGE_OPTIONS: ProgrammingLanguage[] = [\n    'python',\n    'javascript',\n    'typescript',\n    'java',\n    'cpp',\n    'c',\n    'go',\n    'dart',\n    'html',\n    'css',\n    'bash',\n    'powershell',\n];\n\n// 语言标签\nexport const PROGRAMMING_LANGUAGE_LABELS: Record<ProgrammingLanguage, string> = {\n    python: 'Python',\n    javascript: 'JavaScript',\n    typescript: 'TypeScript',\n    java: 'Java',\n    cpp: 'C++',\n    c: 'C',\n    go: 'Go',\n    dart: 'Dart',\n    html: 'HTML',\n    css: 'CSS',\n    bash: 'Bash/Linux',\n    powershell: 'PowerShell',\n};\n\nexport const CHINESE_STYLE_LABELS: Record<ChineseStyle, string> = {\n    modern: '现代文',\n    classical: '文言文',\n};\n\n// WPM 计算常量\nexport const CHARS_PER_WORD = 5; // 标准：5个字符算1个单词\n"],"names":[],"mappings":"AAAA,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,MAAM,mBAAmB,IAAI,QAAQ;AACrC,MAAM,eAA2B;AACjC,MAAM,qBAAsC;AAC5C,MAAM,wBAAsC;AAC5C,MAAM,+BAAoD;AAC1D,MAAM,0BAA0C;IACnD,eAAe;IACf,mBAAmB;AACvB;AAGO,MAAM,mBAAmB;IAAC;IAAI;IAAI;IAAI;CAAI;AAG1C,MAAM,qBAAwC;IAAC;IAAQ;IAAU;CAAO;AAGxE,MAAM,wBAAwC;IAAC;IAAU;CAAY;AAGrE,MAAM,+BAAsD;IAC/D;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAGM,MAAM,8BAAmE;IAC5E,QAAQ;IACR,YAAY;IACZ,YAAY;IACZ,MAAM;IACN,KAAK;IACL,GAAG;IACH,IAAI;IACJ,MAAM;IACN,MAAM;IACN,KAAK;IACL,MAAM;IACN,YAAY;AAChB;AAEO,MAAM,uBAAqD;IAC9D,QAAQ;IACR,WAAW;AACf;AAGO,MAAM,iBAAiB,GAAG,eAAe"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/lib/utils/textGenerator.ts"],"sourcesContent":["import { TypingMode, DifficultyLevel, ChineseStyle, ProgrammingLanguage } from '@/lib/constants';\n\n// ==================== 英文文本库 ====================\n\n// 英文 - 简单\nconst englishTextsEasy = [\n  \"The cat sat on the mat and looked around.\",\n  \"I like to eat pizza on Friday nights.\",\n  \"The sun is bright and the sky is blue.\",\n  \"She has a red car and a black bike.\",\n  \"We go to the park every weekend.\",\n  \"He reads books before going to bed.\",\n  \"The dog runs fast in the garden.\",\n  \"They play games after school ends.\",\n  \"My room is clean and very tidy.\",\n  \"The baby sleeps in the small crib.\",\n];\n\n// 英文 - 中等\nconst englishTextsMedium = [\n  \"The quick brown fox jumps over the lazy dog near the riverbank.\",\n  \"Technology has changed the way we communicate with each other every single day.\",\n  \"Learning a new language requires patience, practice, and dedication to succeed.\",\n  \"The beautiful sunset painted the sky with shades of orange and purple tonight.\",\n  \"She decided to pursue her dreams despite facing numerous challenges along the way.\",\n  \"Reading books expands your knowledge and improves your vocabulary significantly over time.\",\n  \"The coffee shop on the corner serves the best cappuccino in the entire neighborhood.\",\n  \"Exercise regularly and eat healthy food to maintain a balanced lifestyle always.\",\n  \"The mountains stood tall against the horizon as clouds drifted by slowly overhead.\",\n  \"Music has the power to evoke emotions and create lasting memories for everyone.\",\n];\n\n// 英文 - 困难  \nconst englishTextsHard = [\n  \"There are two ways to write error-free programs; only the third one works consistently in practice.\",\n  \"The peculiarity of the scientific method is precisely that it does not necessarily lead to certainty.\",\n  \"Procrastination is the art of keeping up with yesterday and avoiding today until tomorrow arrives.\",\n  \"In the midst of chaos, there is also opportunity for those who are prepared to seize it boldly.\",\n  \"The fundamental cause of trouble is that the foolish are so certain while the wise are full of doubt.\",\n  \"Excellence is not a destination but a continuous journey that requires persistent effort and dedication.\",\n  \"The difference between ordinary and extraordinary is that little extra effort applied consistently over time.\",\n  \"Innovation distinguishes between a leader and a follower in any competitive environment or marketplace.\",\n  \"The only way to do great work is to love what you do passionately and pursue it relentlessly.\",\n  \"Success is not final, failure is not fatal; it is the courage to continue that truly counts.\",\n];\n\n// ==================== 中文文本库 ====================\n\n// 中文现代文 - 简单\nconst chineseModernEasy = [\n  \"今天天气很好，阳光明媚，我和朋友一起去公园散步。\",\n  \"妈妈做的饭菜很好吃，我最喜欢吃她做的红烧肉。\",\n  \"图书馆里很安静，大家都在认真地看书学习。\",\n  \"小猫在阳台上晒太阳，看起来很舒服的样子。\",\n  \"周末我喜欢在家里看电影，放松一下心情。\",\n  \"这家咖啡店的环境很好，咖啡也很香醇。\",\n  \"春天来了，公园里的花都开了，非常漂亮。\",\n  \"他每天早上都会去跑步锻炼身体，风雨无阻。\",\n  \"晚上的星空很美，星星一闪一闪地发着光。\",\n  \"学习新知识需要耐心和毅力，不能半途而废。\",\n];\n\n// 中文现代文 - 中等\nconst chineseModernMedium = [\n  \"生活就像一盒巧克力，你永远不知道下一颗是什么味道。每一天都充满了未知的惊喜和挑战，我们要学会珍惜当下，享受生活中的每一个美好瞬间。\",\n  \"读书是一种很好的习惯，它能够让我们增长见识，开阔视野。通过阅读，我们可以了解不同的文化，体验不同的人生，让自己的思想变得更加丰富多彩。\",\n  \"科技的发展改变了我们的生活方式，让我们的日常变得更加便捷。从智能手机到人工智能，科技创新不断地影响着我们的工作和生活，带来了前所未有的便利。\",\n  \"友谊是人生中最宝贵的财富之一。真正的朋友会在你需要的时候陪伴在你身边，分享你的快乐，分担你的忧愁，让你的人生不再孤单。\",\n  \"旅行可以让我们放松心情，开阔眼界。每到一个新的地方，我们都能体验不同的文化，品尝特色美食，结识新的朋友，获得难忘的回忆和宝贵的经历。\",\n];\n\n// 中文现代文 - 困难\nconst chineseModernHard = [\n  \"时间是一条永不停息的河流，它无声无息地流淌着，带走了我们的青春，留下了岁月的痕迹。我们无法阻止时间的脚步，但可以选择如何度过每一天，让生命更加充实和有意义。在这个快节奏的社会里，我们需要学会慢下来，用心感受生活中的美好，珍惜与家人朋友相处的每一刻时光。\",\n  \"教育的本质不仅仅是传授知识，更重要的是培养学生的思维能力和创新精神。一个优秀的教育体系应该注重学生的全面发展，不仅要让他们掌握必要的技能和知识，还要培养他们的批判性思维、创造力和解决问题的能力，使他们能够在未来的社会中立足并做出贡献。\",\n  \"人工智能技术的飞速发展正在深刻地改变着我们的世界。从自动驾驶汽车到智能医疗诊断，从语音助手到机器翻译，人工智能正在各个领域展现出巨大的潜力。然而，我们也需要认真思考这项技术可能带来的伦理问题和社会影响，确保技术发展能够真正造福人类。\",\n];\n\n// 中文文言文 - 简单\nconst chineseClassicalEasy = [\n  \"学而时习之，不亦说乎？有朋自远方来，不亦乐乎？\",\n  \"三人行，必有我师焉。择其善者而从之，其不善者而改之。\",\n  \"知之为知之，不知为不知，是知也。\",\n  \"己所不欲，勿施于人。\",\n  \"温故而知新，可以为师矣。\",\n  \"学而不思则罔，思而不学则殆。\",\n  \"敏而好学，不耻下问。\",\n  \"知者不惑，仁者不忧，勇者不惧。\",\n  \"君子坦荡荡，小人长戚戚。\",\n  \"岁寒，然后知松柏之后凋也。\",\n];\n\n// 中文文言文 - 中等  \nconst chineseClassicalMedium = [\n  \"天将降大任于斯人也，必先苦其心志，劳其筋骨，饿其体肤，空乏其身，行拂乱其所为，所以动心忍性，曾益其所不能。\",\n  \"故天将降大任于是人也，必先苦其心志，劳其筋骨，饿其体肤，空乏其身，行拂乱其所为，所以动心忍性，增益其所不能。\",\n  \"鱼，我所欲也；熊掌，亦我所欲也。二者不可得兼，舍鱼而取熊掌者也。生，亦我所欲也；义，亦我所欲也。二者不可得兼，舍生而取义者也。\",\n  \"富贵不能淫，贫贱不能移，威武不能屈，此之谓大丈夫。\",\n  \"生于忧患，死于安乐。故天将降大任于是人也，必先苦其心志。\",\n];\n\n// 中文文言文 - 困难\nconst chineseClassicalHard = [\n  \"子曰：学而时习之，不亦说乎？有朋自远方来，不亦乐乎？人不知而不愠，不亦君子乎？有子曰：其为人也孝弟，而好犯上者，鲜矣；不好犯上，而好作乱者，未之有也。君子务本，本立而道生。孝弟也者，其为仁之本与！\",\n  \"大学之道，在明明德，在亲民，在止于至善。知止而后有定，定而后能静，静而后能安，安而后能虑，虑而后能得。物有本末，事有终始，知所先后，则近道矣。古之欲明明德于天下者，先治其国；欲治其国者，先齐其家。\",\n  \"天下之至柔，驰骋天下之至坚。无有入无间，吾是以知无为之有益。不言之教，无为之益，天下希及之。名与身孰亲？身与货孰多？得与亡孰病？是故甚爱必大费，多藏必厚亡。知足不辱，知止不殆，可以长久。\",\n];\n\n// ==================== 代码文本库 ====================\n\n// Python - 简单\nconst pythonEasy = [\n  `def hello_world():\n    print(\"Hello, World!\")\n    return True`,\n  `numbers = [1, 2, 3, 4, 5]\nfor num in numbers:\n    print(num * 2)`,\n  `def add(a, b):\n    return a + b\n\nresult = add(5, 3)\nprint(result)`,\n];\n\n// Python - 中等\nconst pythonMedium = [\n  `class Person:\n    def __init__(self, name, age):\n        self.name = name\n        self.age = age\n    \n    def introduce(self):\n        return f\"Hi, I'm {self.name} and I'm {self.age} years old\"`,\n  `def fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\nresult = [fibonacci(i) for i in range(10)]\nprint(result)`,\n];\n\n// Python - 困难\nconst pythonHard = [\n  `from functools import wraps\nfrom time import time\n\ndef timing_decorator(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        start = time()\n        result = func(*args, **kwargs)\n        end = time()\n        print(f'{func.__name__} took {end-start:.2f}s')\n        return result\n    return wrapper\n\n@timing_decorator\nasync def fetch_data(url):\n    async with aiohttp.ClientSession() as session:\n        async with session.get(url) as response:\n            return await response.json()`,\n];\n\n// JavaScript - 简单\nconst javascriptEasy = [\n  `function greet(name) {\n    console.log(\"Hello, \" + name);\n}\n\ngreet(\"World\");`,\n  `const numbers = [1, 2, 3, 4, 5];\nconst doubled = numbers.map(n => n * 2);\nconsole.log(doubled);`,\n];\n\n// JavaScript - 中等\nconst javascriptMedium = [\n  `const fetchData = async (url) => {\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('Error:', error);\n    }\n};`,\n  `class Calculator {\n    constructor() {\n        this.result = 0;\n    }\n    \n    add(num) {\n        this.result += num;\n        return this;\n    }\n    \n    multiply(num) {\n        this.result *= num;\n        return this;\n    }\n}`,\n];\n\n// JavaScript - 困难\nconst javascriptHard = [\n  `const createStore = (reducer) => {\n    let state;\n    let listeners = [];\n    \n    const getState = () => state;\n    \n    const dispatch = (action) => {\n        state = reducer(state, action);\n        listeners.forEach(listener => listener());\n    };\n    \n    const subscribe = (listener) => {\n        listeners.push(listener);\n        return () => {\n            listeners = listeners.filter(l => l !== listener);\n        };\n    };\n    \n    return { getState, dispatch, subscribe };\n};`,\n];\n\n// Java - 简单\nconst javaEasy = [\n  `public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World!\");\n    }\n}`,\n  `int[] numbers = {1, 2, 3, 4, 5};\nfor (int num : numbers) {\n    System.out.println(num * 2);\n}`,\n];\n\n// Java - 中等\nconst javaMedium = [\n  `public class Person {\n    private String name;\n    private int age;\n    \n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n    \n    public String introduce() {\n        return \"Hi, I'm \" + name + \" and I'm \" + age + \" years old\";\n    }\n}`,\n];\n\n// Java - 困难\nconst javaHard = [\n  `public class GenericRepository<T extends Entity> {\n    private final Class<T> entityClass;\n    \n    public GenericRepository(Class<T> entityClass) {\n        this.entityClass = entityClass;\n    }\n    \n    public List<T> findAll() {\n        CriteriaBuilder cb = em.getCriteriaBuilder();\n        CriteriaQuery<T> query = cb.createQuery(entityClass);\n        Root<T> root = query.from(entityClass);\n        return em.createQuery(query).getResultList();\n    }\n}`,\n];\n\n// Go - 简单\nconst goEasy = [\n  `package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello, World!\")\n}`,\n  `func add(a, b int) int {\n    return a + b\n}\n\nresult := add(5, 3)\nfmt.Println(result)`,\n];\n\n// Go - 中等\nconst goMedium = [\n  `type Person struct {\n    Name string\n    Age  int\n}\n\nfunc (p *Person) Introduce() string {\n    return fmt.Sprintf(\"Hi, I'm %s and I'm %d years old\", p.Name, p.Age)\n}`,\n  `func fetchData(url string) ([]byte, error) {\n    resp, err := http.Get(url)\n    if err != nil {\n        return nil, err\n    }\n    defer resp.Body.Close()\n    return ioutil.ReadAll(resp.Body)\n}`,\n];\n\n// Go - 困难\nconst goHard = [\n  `func worker(id int, jobs <-chan int, results chan<- int) {\n    for j := range jobs {\n        fmt.Printf(\"worker %d processing job %d\\\\n\", id, j)\n        time.Sleep(time.Second)\n        results <- j * 2\n    }\n}\n\nfunc main() {\n    jobs := make(chan int, 100)\n    results := make(chan int, 100)\n    \n    for w := 1; w <= 3; w++ {\n        go worker(w, jobs, results)\n    }\n}`,\n];\n\n// C++ - 简单\nconst cppEasy = [\n  `#include <iostream>\n\nint main() {\n    std::cout << \"Hello, World!\" << std::endl;\n    return 0;\n}`,\n  `int add(int a, int b) {\n    return a + b;\n}\n\nint result = add(5, 3);\nstd::cout << result;`,\n];\n\n// C++ - 中等\nconst cppMedium = [\n  `class Person {\nprivate:\n    std::string name;\n    int age;\n    \npublic:\n    Person(std::string n, int a) : name(n), age(a) {}\n    \n    std::string introduce() {\n        return \"Hi, I'm \" + name;\n    }\n};`,\n];\n\n// C++ - 困难\nconst cppHard = [\n  `template<typename T>\nclass SmartPointer {\nprivate:\n    T* ptr;\n    size_t* ref_count;\n    \npublic:\n    SmartPointer(T* p = nullptr) : ptr(p), ref_count(new size_t(1)) {}\n    \n    SmartPointer(const SmartPointer& other) {\n        ptr = other.ptr;\n        ref_count = other.ref_count;\n        (*ref_count)++;\n    }\n    \n    ~SmartPointer() {\n        if (--(*ref_count) == 0) {\n            delete ptr;\n            delete ref_count;\n        }\n    }\n};`,\n];\n\n// HTML - 简单\nconst htmlEasy = [\n  `<!DOCTYPE html>\n<html>\n<head>\n    <title>My Page</title>\n</head>\n<body>\n    <h1>Hello World</h1>\n    <p>Welcome to my website.</p>\n</body>\n</html>`,\n];\n\n// HTML - 中等\nconst htmlMedium = [\n  `<div class=\"container\">\n    <header class=\"navbar\">\n        <nav>\n            <ul>\n                <li><a href=\"#home\">Home</a></li>\n                <li><a href=\"#about\">About</a></li>\n                <li><a href=\"#contact\">Contact</a></li>\n            </ul>\n        </nav>\n    </header>\n    <main>\n        <section id=\"content\">\n            <article>\n                <h2>Article Title</h2>\n                <p>Article content goes here...</p>\n            </article>\n        </section>\n    </main>\n</div>`,\n];\n\n// CSS - 简单\nconst cssEasy = [\n  `.button {\n    background-color: blue;\n    color: white;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 5px;\n}`,\n];\n\n// CSS - 中等\nconst cssMedium = [\n  `.card {\n    display: flex;\n    flex-direction: column;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    transition: transform 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n}`,\n];\n\n// Bash - 简单\nconst bashEasy = [\n  `#!/bin/bash\n\necho \"Hello, World!\"\nname=\"User\"\necho \"Welcome, $name\"`,\n];\n\n// Bash - 中等\nconst bashMedium = [\n  `#!/bin/bash\n\nfor file in *.txt; do\n    if [ -f \"$file\" ]; then\n        echo \"Processing $file\"\n        cat \"$file\" | grep \"pattern\" > output.txt\n    fi\ndone`,\n];\n\n// PowerShell - 简单\nconst powershellEasy = [\n  `Write-Host \"Hello, World!\"\n$name = \"User\"\nWrite-Host \"Welcome, $name\"`,\n];\n\n// PowerShell - 中等\nconst powershellMedium = [\n  `Get-ChildItem -Path \"C:\\\\Logs\" -Filter \"*.log\" | \n    Where-Object { $_.LastWriteTime -gt (Get-Date).AddDays(-7) } |\n    ForEach-Object {\n        Write-Host \"Processing $($_.Name)\"\n        Get-Content $_.FullName | Select-String \"ERROR\"\n    }`,\n];\n\n// ==================== 文本池获取函数 ====================\n\nfunction getTextPool(\n  mode: TypingMode,\n  difficulty: DifficultyLevel,\n  chineseStyle?: ChineseStyle,\n  programmingLanguage?: ProgrammingLanguage\n): string[] {\n  if (mode === 'english') {\n    const pools = {\n      easy: englishTextsEasy,\n      medium: englishTextsMedium,\n      hard: englishTextsHard,\n    };\n    return pools[difficulty];\n  }\n\n  if (mode === 'chinese') {\n    const style = chineseStyle || 'modern';\n    const pools = {\n      modern: {\n        easy: chineseModernEasy,\n        medium: chineseModernMedium,\n        hard: chineseModernHard,\n      },\n      classical: {\n        easy: chineseClassicalEasy,\n        medium: chineseClassicalMedium,\n        hard: chineseClassicalHard,\n      },\n    };\n    return pools[style][difficulty];\n  }\n\n  if (mode === 'coder') {\n    const lang = programmingLanguage || 'python';\n    const codePools: Record<ProgrammingLanguage, Record<DifficultyLevel, string[]>> = {\n      python: { easy: pythonEasy, medium: pythonMedium, hard: pythonHard },\n      javascript: { easy: javascriptEasy, medium: javascriptMedium, hard: javascriptHard },\n      typescript: { easy: javascriptEasy, medium: javascriptMedium, hard: javascriptHard },\n      java: { easy: javaEasy, medium: javaMedium, hard: javaHard },\n      go: { easy: goEasy, medium: goMedium, hard: goHard },\n      cpp: { easy: cppEasy, medium: cppMedium, hard: cppHard },\n      c: { easy: cppEasy, medium: cppMedium, hard: cppHard },\n      dart: { easy: javascriptEasy, medium: javascriptMedium, hard: javascriptHard },\n      html: { easy: htmlEasy, medium: htmlMedium, hard: htmlMedium },\n      css: { easy: cssEasy, medium: cssMedium, hard: cssMedium },\n      bash: { easy: bashEasy, medium: bashMedium, hard: bashMedium },\n      powershell: { easy: powershellEasy, medium: powershellMedium, hard: powershellMedium },\n    };\n\n    return codePools[lang]?.[difficulty] || pythonEasy;\n  }\n\n  return englishTextsEasy;\n}\n\n// 随机打乱数组\nfunction shuffleArray<T>(array: T[]): T[] {\n  const newArray = [...array];\n  for (let i = newArray.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n  }\n  return newArray;\n}\n\n/**\n * 生成练习文本\n */\nexport function generateText(\n  mode: TypingMode,\n  difficulty: DifficultyLevel,\n  minLength: number = 200,\n  chineseStyle?: ChineseStyle,\n  programmingLanguage?: ProgrammingLanguage\n): string {\n  const textPool = getTextPool(mode, difficulty, chineseStyle, programmingLanguage);\n  const shuffled = shuffleArray(textPool);\n\n  let result = '';\n  let index = 0;\n\n  while (result.length < minLength && index < shuffled.length) {\n    if (result.length > 0) {\n      result += ' ';\n    }\n    result += shuffled[index];\n    index++;\n  }\n\n  // 如果遍历完了还不够长，重新开始\n  while (result.length < minLength) {\n    if (result.length > 0) {\n      result += ' ';\n    }\n    result += shuffled[index % shuffled.length];\n    index++;\n  }\n\n  return result.trim();\n}\n"],"names":[],"mappings":";;;;AAEA,kDAAkD;AAElD,UAAU;AACV,MAAM,mBAAmB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,UAAU;AACV,MAAM,qBAAqB;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,YAAY;AACZ,MAAM,mBAAmB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,kDAAkD;AAElD,aAAa;AACb,MAAM,oBAAoB;IACxB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,aAAa;AACb,MAAM,sBAAsB;IAC1B;IACA;IACA;IACA;IACA;CACD;AAED,aAAa;AACb,MAAM,oBAAoB;IACxB;IACA;IACA;CACD;AAED,aAAa;AACb,MAAM,uBAAuB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,eAAe;AACf,MAAM,yBAAyB;IAC7B;IACA;IACA;IACA;IACA;CACD;AAED,aAAa;AACb,MAAM,uBAAuB;IAC3B;IACA;IACA;CACD;AAED,kDAAkD;AAElD,cAAc;AACd,MAAM,aAAa;IACjB,CAAC;;eAEY,CAAC;IACd,CAAC;;kBAEe,CAAC;IACjB,CAAC;;;;aAIU,CAAC;CACb;AAED,cAAc;AACd,MAAM,eAAe;IACnB,CAAC;;;;;;kEAM+D,CAAC;IACjE,CAAC;;;;;;aAMU,CAAC;CACb;AAED,cAAc;AACd,MAAM,aAAa;IACjB,CAAC;;;;;;;;;;;;;;;;;wCAiBqC,CAAC;CACxC;AAED,kBAAkB;AAClB,MAAM,iBAAiB;IACrB,CAAC;;;;eAIY,CAAC;IACd,CAAC;;qBAEkB,CAAC;CACrB;AAED,kBAAkB;AAClB,MAAM,mBAAmB;IACvB,CAAC;;;;;;;;EAQD,CAAC;IACD,CAAC;;;;;;;;;;;;;;CAcF,CAAC;CACD;AAED,kBAAkB;AAClB,MAAM,iBAAiB;IACrB,CAAC;;;;;;;;;;;;;;;;;;;EAmBD,CAAC;CACF;AAED,YAAY;AACZ,MAAM,WAA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"}},
    {"offset": {"line": 696, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/utils/wpmCalculator.ts"],"sourcesContent":["import { CHARS_PER_WORD } from '@/lib/constants';\n\n/**\n * 标准化特殊字符 - 将各种Unicode变体转换为标准字符\n * 这确保不同输入方式的相同符号能够正确匹配\n */\nexport function normalizeSpecialChars(text: string): string {\n  return text\n    // 各种连字符 → 标准连字符\n    .replace(/[\\u2010\\u2011\\u2012\\u2013\\u2014\\u2015\\u2212]/g, '-')  // en-dash, em-dash, minus等 → hyphen\n\n    // 各种引号 → 标准引号\n    .replace(/[\\u2018\\u2019\\u201A\\u201B]/g, \"'\")  // 左右单引号 → 直单引号\n    .replace(/[\\u201C\\u201D\\u201E\\u201F]/g, '\"')  // 左右双引号 → 直双引号\n    .replace(/[\\u00AB\\u00BB]/g, '\"')             // 书名号 → 双引号\n\n    // 省略号 → 三个点\n    .replace(/\\u2026/g, '...')  // … → ...\n\n    // 各种空格 → 标准空格\n    .replace(/[\\u00A0\\u2000-\\u200B\\u202F\\u205F\\u3000]/g, ' ')  // 不换行空格、各种宽度空格 → 普通空格\n\n    // 其他特殊字符\n    .replace(/\\u00D7/g, 'x')   // × → x (乘号)\n    .replace(/\\u00F7/g, '/')   // ÷ → / (除号)\n    .replace(/\\u2022/g, '*')   // • → * (项目符号)\n    .replace(/\\u2219/g, '*')   // ∙ → * (bullet operator)\n    ;\n}\n\n/**\n * 计算 WPM (Words Per Minute)\n * 标准计算方式：(正确字符数 / 5) / 分钟数\n */\nexport function calculateWPM(\n  correctChars: number,\n  elapsedSeconds: number\n): number {\n  if (elapsedSeconds <= 0) return 0;\n\n  const minutes = elapsedSeconds / 60;\n  const words = correctChars / CHARS_PER_WORD;\n\n  return Math.round(words / minutes);\n}\n\n/**\n * 计算原始 WPM（不考虑错误惩罚）\n */\nexport function calculateRawWPM(\n  totalChars: number,\n  elapsedSeconds: number\n): number {\n  if (elapsedSeconds <= 0) return 0;\n\n  const minutes = elapsedSeconds / 60;\n  const words = totalChars / CHARS_PER_WORD;\n\n  return Math.round(words / minutes);\n}\n\n/**\n * 计算准确率\n */\nexport function calculateAccuracy(\n  correctChars: number,\n  totalChars: number\n): number {\n  if (totalChars <= 0) return 100;\n  return Math.round((correctChars / totalChars) * 100);\n}\n\n/**\n * 计算 CPM (Characters Per Minute) - 字符/分钟\n */\nexport function calculateCPM(\n  correctChars: number,\n  elapsedSeconds: number\n): number {\n  if (elapsedSeconds <= 0) return 0;\n  const minutes = elapsedSeconds / 60;\n  return Math.round(correctChars / minutes);\n}\n\n/**\n * 计算 LPM (Lines Per Minute) - 行/分钟\n * 用于程序员模式\n */\nexport function calculateLPM(\n  totalText: string,\n  correctChars: number,\n  elapsedSeconds: number\n): number {\n  if (elapsedSeconds <= 0) return 0;\n\n  // 计算总行数\n  const totalLines = totalText.split('\\n').length;\n\n  // 计算完成的比例\n  const completionRate = correctChars / totalText.length;\n\n  // 估算完成的行数\n  const completedLines = totalLines * completionRate;\n\n  const minutes = elapsedSeconds / 60;\n  return Math.round(completedLines / minutes);\n}\n\n/**\n * 分析输入文本与目标文本的差异\n */\nexport function analyzeTyping(targetText: string, typedText: string): {\n  correctChars: number;\n  errors: number;\n  totalTyped: number;\n} {\n  // 1. 特殊字符标准化 - 确保符号正确匹配\n  let normalizedTarget = normalizeSpecialChars(targetText);\n  let normalizedTyped = normalizeSpecialChars(typedText);\n\n  // 2. Unicode 标准化 - 确保中文字符比较正确\n  normalizedTarget = normalizedTarget.normalize('NFC');\n  normalizedTyped = normalizedTyped.normalize('NFC');\n\n  let correctChars = 0;\n  let errors = 0;\n\n  for (let i = 0; i < normalizedTyped.length; i++) {\n    if (i < normalizedTarget.length && normalizedTyped[i] === normalizedTarget[i]) {\n      correctChars++;\n    } else {\n      errors++;\n    }\n  }\n\n  return {\n    correctChars,\n    errors,\n    totalTyped: normalizedTyped.length,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAMO,SAAS,sBAAsB,IAAY;IAChD,OAAO,IACL,gBAAgB;KACf,OAAO,CAAC,iDAAiD,KAAM,oCAAoC;IAEpG,cAAc;KACb,OAAO,CAAC,+BAA+B,KAAM,eAAe;KAC5D,OAAO,CAAC,+BAA+B,KAAM,eAAe;KAC5D,OAAO,CAAC,mBAAmB,KAAiB,YAAY;IAEzD,YAAY;KACX,OAAO,CAAC,WAAW,OAAQ,UAAU;IAEtC,cAAc;KACb,OAAO,CAAC,4CAA4C,KAAM,sBAAsB;IAEjF,SAAS;KACR,OAAO,CAAC,WAAW,KAAO,aAAa;KACvC,OAAO,CAAC,WAAW,KAAO,aAAa;KACvC,OAAO,CAAC,WAAW,KAAO,eAAe;KACzC,OAAO,CAAC,WAAW,KAAO,0BAA0B;;AAEzD;AAMO,SAAS,aACd,YAAoB,EACpB,cAAsB;IAEtB,IAAI,kBAAkB,GAAG,OAAO;IAEhC,MAAM,UAAU,iBAAiB;IACjC,MAAM,QAAQ,eAAe,yKAAc;IAE3C,OAAO,KAAK,KAAK,CAAC,QAAQ;AAC5B;AAKO,SAAS,gBACd,UAAkB,EAClB,cAAsB;IAEtB,IAAI,kBAAkB,GAAG,OAAO;IAEhC,MAAM,UAAU,iBAAiB;IACjC,MAAM,QAAQ,aAAa,yKAAc;IAEzC,OAAO,KAAK,KAAK,CAAC,QAAQ;AAC5B;AAKO,SAAS,kBACd,YAAoB,EACpB,UAAkB;IAElB,IAAI,cAAc,GAAG,OAAO;IAC5B,OAAO,KAAK,KAAK,CAAC,AAAC,eAAe,aAAc;AAClD;AAKO,SAAS,aACd,YAAoB,EACpB,cAAsB;IAEtB,IAAI,kBAAkB,GAAG,OAAO;IAChC,MAAM,UAAU,iBAAiB;IACjC,OAAO,KAAK,KAAK,CAAC,eAAe;AACnC;AAMO,SAAS,aACd,SAAiB,EACjB,YAAoB,EACpB,cAAsB;IAEtB,IAAI,kBAAkB,GAAG,OAAO;IAEhC,QAAQ;IACR,MAAM,aAAa,UAAU,KAAK,CAAC,MAAM,MAAM;IAE/C,UAAU;IACV,MAAM,iBAAiB,eAAe,UAAU,MAAM;IAEtD,UAAU;IACV,MAAM,iBAAiB,aAAa;IAEpC,MAAM,UAAU,iBAAiB;IACjC,OAAO,KAAK,KAAK,CAAC,iBAAiB;AACrC;AAKO,SAAS,cAAc,UAAkB,EAAE,SAAiB;IAKjE,wBAAwB;IACxB,IAAI,mBAAmB,sBAAsB;IAC7C,IAAI,kBAAkB,sBAAsB;IAE5C,8BAA8B;IAC9B,mBAAmB,iBAAiB,SAAS,CAAC;IAC9C,kBAAkB,gBAAgB,SAAS,CAAC;IAE5C,IAAI,eAAe;IACnB,IAAI,SAAS;IAEb,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;QAC/C,IAAI,IAAI,iBAAiB,MAAM,IAAI,eAAe,CAAC,EAAE,KAAK,gBAAgB,CAAC,EAAE,EAAE;YAC7E;QACF,OAAO;YACL;QACF;IACF;IAEA,OAAO;QACL;QACA;QACA,YAAY,gBAAgB,MAAM;IACpC;AACF"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/store/typingStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport {\n  TypingMode,\n  TypingStatus,\n  DifficultyLevel,\n  ChineseStyle,\n  ProgrammingLanguage,\n  EnglishOptions,\n  DEFAULT_DURATION,\n  DEFAULT_MODE,\n  DEFAULT_DIFFICULTY,\n  DEFAULT_CHINESE_STYLE,\n  DEFAULT_PROGRAMMING_LANGUAGE,\n  DEFAULT_ENGLISH_OPTIONS,\n} from '@/lib/constants';\nimport { generateText } from '@/lib/utils/textGenerator';\nimport { analyzeTyping, calculateWPM, calculateCPM, calculateLPM, calculateAccuracy } from '../utils/wpmCalculator';\n\n// WPM 历史记录点（用于绘制曲线图）\nexport interface WpmHistoryPoint {\n  time: number; // 经过的秒数\n  wpm: number;\n  accuracy: number;\n}\n\n// 设置接口\nexport interface TypingSettings {\n  duration: number; // 秒数\n  mode: TypingMode;\n  difficulty: DifficultyLevel; // 难度级别\n  chineseStyle: ChineseStyle; // 中文文体\n  programmingLanguage: ProgrammingLanguage; // 编程语言\n  englishOptions: EnglishOptions; // 英文选项\n}\n\n// 状态接口\nexport interface TypingState {\n  // 核心状态\n  status: TypingStatus;\n  targetText: string; // 原始文本\n  displayText: string; // 处理后的显示文本（根据选项处理）\n  typedText: string;\n\n  // 统计数据\n  correctChars: number;\n  errors: number;\n  wpm: number;        // Words Per Minute (英文模式)\n  cpm: number;        // Characters Per Minute (所有模式)\n  lpm: number;        // Lines Per Minute (代码模式)\n  accuracy: number;\n\n  // 时间相关\n  timeLeft: number;\n  startTime: number | null;\n\n  // WPM 历史（用于图表）\n  wpmHistory: WpmHistoryPoint[];\n\n  // 设置\n  settings: TypingSettings;\n\n  // Actions\n  initTest: () => void;\n  startTest: () => void;\n  handleInput: (char: string) => void;\n  handleBackspace: () => void;\n  tick: () => void;\n  finishTest: () => void;\n  resetTest: () => void;\n  updateSettings: (settings: Partial<TypingSettings>) => void;\n}\n\n/**\n * 处理目标文本（根据英文选项）\n */\nfunction processTargetText(text: string, mode: TypingMode, options: EnglishOptions): string {\n  if (mode !== 'english') return text;\n\n  let processed = text;\n\n  // 忽略标点符号：直接从文本中移除\n  if (options.ignorePunctuation) {\n    processed = processed.replace(/[.,!?;:'\"-]/g, '');\n  }\n\n  // 不区分大小写：转换为小写\n  if (!options.caseSensitive) {\n    processed = processed.toLowerCase();\n  }\n\n  return processed;\n}\n\nexport const useTypingStore = create<TypingState>((set, get) => ({\n  // 初始状态\n  status: 'idle',\n  targetText: '',\n  displayText: '',\n  typedText: '',\n  correctChars: 0,\n  errors: 0,\n  wpm: 0,\n  cpm: 0,\n  lpm: 0,\n  accuracy: 100,\n  timeLeft: DEFAULT_DURATION,\n  startTime: null,\n  wpmHistory: [],\n  settings: {\n    duration: DEFAULT_DURATION,\n    mode: DEFAULT_MODE,\n    difficulty: DEFAULT_DIFFICULTY,\n    chineseStyle: DEFAULT_CHINESE_STYLE,\n    programmingLanguage: DEFAULT_PROGRAMMING_LANGUAGE,\n    englishOptions: DEFAULT_ENGLISH_OPTIONS,\n  },\n\n  // 初始化测试（生成新文本）\n  initTest: () => {\n    const { settings } = get();\n    const rawText = generateText(\n      settings.mode,\n      settings.difficulty,\n      500,\n      settings.chineseStyle,\n      settings.programmingLanguage\n    );\n    const displayText = processTargetText(rawText, settings.mode, settings.englishOptions);\n\n    set({\n      status: 'idle',\n      targetText: rawText,\n      displayText,\n      typedText: '',\n      correctChars: 0,\n      errors: 0,\n      wpm: 0,\n      accuracy: 100,\n      timeLeft: settings.duration,\n      startTime: null,\n      wpmHistory: [],\n    });\n  },\n\n  // 开始测试\n  startTest: () => {\n    set({\n      status: 'running',\n      startTime: Date.now(),\n    });\n  },\n\n  // 处理输入\n  handleInput: (char: string) => {\n    const { status, displayText, typedText } = get();\n\n    // 如果是 idle 状态，先开始测试\n    if (status === 'idle') {\n      get().startTest();\n    }\n\n    if (status === 'finished') return;\n\n    // 如果已经输入完所有目标文本，忽略新输入\n    if (typedText.length >= displayText.length) return;\n\n    // 直接添加输入字符（不做任何转换，因为displayText已经预处理过了）\n    const newTypedText = typedText + char;\n    const analysis = analyzeTyping(displayText, newTypedText);\n\n    set({\n      typedText: newTypedText,\n      correctChars: analysis.correctChars,\n      errors: analysis.errors,\n      accuracy: calculateAccuracy(analysis.correctChars, analysis.totalTyped),\n    });\n\n    // 检查是否完成所有文本\n    if (newTypedText.length >= displayText.length) {\n      get().finishTest();\n    }\n  },\n\n  // 处理退格\n  handleBackspace: () => {\n    const { status, typedText, displayText } = get();\n\n    if (status === 'finished' || typedText.length === 0) return;\n\n    const newTypedText = typedText.slice(0, -1);\n    const analysis = analyzeTyping(displayText, newTypedText);\n\n    set({\n      typedText: newTypedText,\n      correctChars: analysis.correctChars,\n      errors: analysis.errors,\n      accuracy: calculateAccuracy(analysis.correctChars, analysis.totalTyped),\n    });\n  },\n\n  // 每秒计时器更新\n  tick: () => {\n    const { status, timeLeft, settings, startTime, correctChars, targetText } = get();\n\n    if (status !== 'running') return;\n\n    const newTimeLeft = timeLeft - 1;\n\n    // 每秒更新所有速度指标\n    const elapsedSeconds = startTime ? (Date.now() - startTime) / 1000 : 0;\n    const currentAccuracy = get().accuracy;\n\n    // 计算 WPM (仅英文模式)\n    const currentWpm = settings.mode === 'english'\n      ? calculateWPM(correctChars, elapsedSeconds)\n      : 0;\n\n    // 计算 CPM (所有模式)\n    const currentCpm = calculateCPM(correctChars, elapsedSeconds);\n\n    // 计算 LPM (仅代码模式)\n    const currentLpm = settings.mode === 'coder'\n      ? calculateLPM(targetText, correctChars, elapsedSeconds)\n      : 0;\n\n    // 记录速度历史（根据模式使用不同的值）\n    // 英文模式用WPM，中文模式用CPM，代码模式用LPM\n    const speedValue = settings.mode === 'english'\n      ? currentWpm\n      : settings.mode === 'chinese'\n        ? currentCpm\n        : currentLpm;\n\n    const wpmHistory = [...get().wpmHistory, {\n      time: Math.floor(elapsedSeconds),\n      wpm: speedValue,  // 实际是速度值，不一定是WPM\n      accuracy: currentAccuracy\n    }];\n\n    if (newTimeLeft <= 0) {\n      set({\n        timeLeft: 0,\n        wpm: currentWpm,\n        cpm: currentCpm,\n        lpm: currentLpm,\n        wpmHistory\n      });\n      get().finishTest();\n    } else {\n      set({\n        timeLeft: newTimeLeft,\n        wpm: currentWpm,\n        cpm: currentCpm,\n        lpm: currentLpm,\n        wpmHistory\n      });\n    }\n  },\n\n  // 完成测试\n  finishTest: () => {\n    set({ status: 'finished' });\n  },\n\n  // 重置测试\n  resetTest: () => {\n    get().initTest();\n  },\n\n  // 更新设置\n  updateSettings: (newSettings: Partial<TypingSettings>) => {\n    const { settings, targetText } = get();\n    const updatedSettings = { ...settings, ...newSettings };\n\n    set({ settings: updatedSettings });\n\n    // 如果更改了模式、难度、文体或语言，重新生成文本\n    if ((newSettings.mode && newSettings.mode !== settings.mode) ||\n      (newSettings.difficulty && newSettings.difficulty !== settings.difficulty) ||\n      (newSettings.chineseStyle && newSettings.chineseStyle !== settings.chineseStyle) ||\n      (newSettings.programmingLanguage && newSettings.programmingLanguage !== settings.programmingLanguage)) {\n      get().initTest();\n    } else if (newSettings.englishOptions && settings.mode === 'english') {\n      // 如果只是英文选项改变，重新处理文本\n      const displayText = processTargetText(targetText, settings.mode, updatedSettings.englishOptions);\n      set({\n        displayText,\n        typedText: '', // 重置输入\n        correctChars: 0,\n        errors: 0,\n        accuracy: 100,\n      });\n    } else if (newSettings.duration) {\n      set({ timeLeft: newSettings.duration });\n    }\n  },\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 997, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/hooks/useTypingEngine.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, useRef } from 'react';\nimport { useTypingStore } from '../store/typingStore';\nimport { DifficultyLevel, EnglishOptions, ChineseStyle, ProgrammingLanguage } from '@/lib/constants';\n\n/**\n * 打字引擎 Hook\n * 处理键盘事件监听和计时器逻辑\n */\nexport function useTypingEngine() {\n  const {\n    status,\n    targetText,\n    displayText,\n    typedText,\n    wpm,\n    cpm,\n    lpm,\n    accuracy,\n    timeLeft,\n    errors,\n    correctChars,\n    wpmHistory,\n    settings,\n    initTest,\n    handleInput,\n    handleBackspace,\n    tick,\n    resetTest,\n    updateSettings,\n  } = useTypingStore();\n\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const isComposingRef = useRef(false);\n  const inputValueRef = useRef('');\n\n  // 初始化测试\n  useEffect(() => {\n    if (!targetText) {\n      initTest();\n    }\n  }, [targetText, initTest]);\n\n  // 计时器逻辑\n  useEffect(() => {\n    if (status === 'running') {\n      timerRef.current = setInterval(() => {\n        tick();\n      }, 1000);\n    }\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, [status, tick]);\n\n  // 重新开始测试\n  const restart = useCallback(() => {\n    resetTest();\n    inputValueRef.current = '';\n  }, [resetTest]);\n\n  // 更新设置\n  const setDuration = useCallback(\n    (duration: number) => {\n      updateSettings({ duration });\n    },\n    [updateSettings]\n  );\n\n  const setMode = useCallback(\n    (mode: 'english' | 'chinese' | 'coder') => {\n      updateSettings({ mode });\n    },\n    [updateSettings]\n  );\n\n  const setDifficulty = useCallback(\n    (difficulty: DifficultyLevel) => {\n      updateSettings({ difficulty });\n    },\n    [updateSettings]\n  );\n\n  const setEnglishOptions = useCallback(\n    (englishOptions: EnglishOptions) => {\n      updateSettings({ englishOptions });\n    },\n    [updateSettings]\n  );\n\n  const setChineseStyle = useCallback(\n    (chineseStyle: ChineseStyle) => {\n      updateSettings({ chineseStyle });\n    },\n    [updateSettings]\n  );\n\n  const setProgrammingLanguage = useCallback(\n    (programmingLanguage: ProgrammingLanguage) => {\n      updateSettings({ programmingLanguage });\n    },\n    [updateSettings]\n  );\n\n  // Input change handler - 处理输入法确认后的输入\n  const handleInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      // 如果正在使用输入法，不处理 - 等待 compositionEnd\n      if (isComposingRef.current) {\n        return;\n      }\n\n      if (status === 'finished') return;\n\n      const newValue = e.target.value;\n      const oldValue = inputValueRef.current;\n\n      // 计算新增的字符\n      if (newValue.length > oldValue.length) {\n        const newChars = newValue.slice(oldValue.length);\n\n        // 逐个字符添加\n        for (const char of newChars) {\n          handleInput(char);\n        }\n      } else if (newValue.length < oldValue.length) {\n        // 处理删除\n        const deleteCount = oldValue.length - newValue.length;\n        for (let i = 0; i < deleteCount; i++) {\n          handleBackspace();\n        }\n      }\n\n      inputValueRef.current = newValue;\n\n      // 清空input以准备下一次输入\n      e.target.value = '';\n      inputValueRef.current = '';\n    },\n    [status, handleInput, handleBackspace]\n  );\n\n  // Composition event handlers\n  const handleCompositionStart = useCallback(() => {\n    isComposingRef.current = true;\n  }, []);\n\n  const handleCompositionEnd = useCallback(\n    (e: React.CompositionEvent<HTMLInputElement>) => {\n      isComposingRef.current = false;\n\n      if (status === 'finished') return;\n\n      // 获取确认的文本（中文字符）\n      const data = e.data;\n      if (data) {\n        // 逐个字符添加\n        for (const char of data) {\n          handleInput(char);\n        }\n      }\n\n      // 清空input\n      const target = e.target as HTMLInputElement;\n      target.value = '';\n      inputValueRef.current = '';\n    },\n    [status, handleInput]\n  );\n\n  // KeyDown handler - 处理特殊键\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      // 忽略输入法激活时的按键\n      if (isComposingRef.current) return;\n\n      if (status === 'finished') return;\n\n      // 处理 Backspace\n      if (e.key === 'Backspace') {\n        e.preventDefault();\n        handleBackspace();\n        const target = e.target as HTMLInputElement;\n        target.value = '';\n        inputValueRef.current = '';\n        return;\n      }\n\n      // 处理 Enter 换行（程序员模式）\n      if (e.key === 'Enter' && settings.mode === 'coder') {\n        e.preventDefault();\n        handleInput('\\n');\n        const target = e.target as HTMLInputElement;\n        target.value = '';\n        inputValueRef.current = '';\n        return;\n      }\n    },\n    [status, settings.mode, handleBackspace, handleInput]\n  );\n\n  return {\n    // 状态\n    status,\n    targetText,\n    displayText,\n    typedText,\n    wpm,\n    cpm,\n    lpm,\n    accuracy,\n    timeLeft,\n    errors,\n    correctChars,\n    wpmHistory,\n    settings,\n\n    // 方法\n    restart,\n    setDuration,\n    setMode,\n    setDifficulty,\n    setEnglishOptions,\n    setChineseStyle,\n    setProgrammingLanguage,\n\n    // Input 事件处理器\n    inputHandlers: {\n      onChange: handleInputChange,\n      onCompositionStart: handleCompositionStart,\n      onCompositionEnd: handleCompositionEnd,\n      onKeyDown: handleKeyDown,\n    },\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAUO,SAAS;;IACd,MAAM,EACJ,MAAM,EACN,UAAU,EACV,WAAW,EACX,SAAS,EACT,GAAG,EACH,GAAG,EACH,GAAG,EACH,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,YAAY,EACZ,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,eAAe,EACf,IAAI,EACJ,SAAS,EACT,cAAc,EACf,GAAG,IAAA,2MAAc;IAElB,MAAM,WAAW,IAAA,oMAAM,EAAwB;IAC/C,MAAM,iBAAiB,IAAA,oMAAM,EAAC;IAC9B,MAAM,gBAAgB,IAAA,oMAAM,EAAC;IAE7B,QAAQ;IACR,IAAA,uMAAS;qCAAC;YACR,IAAI,CAAC,YAAY;gBACf;YACF;QACF;oCAAG;QAAC;QAAY;KAAS;IAEzB,QAAQ;IACR,IAAA,uMAAS;qCAAC;YACR,IAAI,WAAW,WAAW;gBACxB,SAAS,OAAO,GAAG;iDAAY;wBAC7B;oBACF;gDAAG;YACL;YAEA;6CAAO;oBACL,IAAI,SAAS,OAAO,EAAE;wBACpB,cAAc,SAAS,OAAO;wBAC9B,SAAS,OAAO,GAAG;oBACrB;gBACF;;QACF;oCAAG;QAAC;QAAQ;KAAK;IAEjB,SAAS;IACT,MAAM,UAAU,IAAA,yMAAW;gDAAC;YAC1B;YACA,cAAc,OAAO,GAAG;QAC1B;+CAAG;QAAC;KAAU;IAEd,OAAO;IACP,MAAM,cAAc,IAAA,yMAAW;oDAC7B,CAAC;YACC,eAAe;gBAAE;YAAS;QAC5B;mDACA;QAAC;KAAe;IAGlB,MAAM,UAAU,IAAA,yMAAW;gDACzB,CAAC;YACC,eAAe;gBAAE;YAAK;QACxB;+CACA;QAAC;KAAe;IAGlB,MAAM,gBAAgB,IAAA,yMAAW;sDAC/B,CAAC;YACC,eAAe;gBAAE;YAAW;QAC9B;qDACA;QAAC;KAAe;IAGlB,MAAM,oBAAoB,IAAA,yMAAW;0DACnC,CAAC;YACC,eAAe;gBAAE;YAAe;QAClC;yDACA;QAAC;KAAe;IAGlB,MAAM,kBAAkB,IAAA,yMAAW;wDACjC,CAAC;YACC,eAAe;gBAAE;YAAa;QAChC;uDACA;QAAC;KAAe;IAGlB,MAAM,yBAAyB,IAAA,yMAAW;+DACxC,CAAC;YACC,eAAe;gBAAE;YAAoB;QACvC;8DACA;QAAC;KAAe;IAGlB,qCAAqC;IACrC,MAAM,oBAAoB,IAAA,yMAAW;0DACnC,CAAC;YACC,oCAAoC;YACpC,IAAI,eAAe,OAAO,EAAE;gBAC1B;YACF;YAEA,IAAI,WAAW,YAAY;YAE3B,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK;YAC/B,MAAM,WAAW,cAAc,OAAO;YAEtC,UAAU;YACV,IAAI,SAAS,MAAM,GAAG,SAAS,MAAM,EAAE;gBACrC,MAAM,WAAW,SAAS,KAAK,CAAC,SAAS,MAAM;gBAE/C,SAAS;gBACT,KAAK,MAAM,QAAQ,SAAU;oBAC3B,YAAY;gBACd;YACF,OAAO,IAAI,SAAS,MAAM,GAAG,SAAS,MAAM,EAAE;gBAC5C,OAAO;gBACP,MAAM,cAAc,SAAS,MAAM,GAAG,SAAS,MAAM;gBACrD,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,IAAK;oBACpC;gBACF;YACF;YAEA,cAAc,OAAO,GAAG;YAExB,kBAAkB;YAClB,EAAE,MAAM,CAAC,KAAK,GAAG;YACjB,cAAc,OAAO,GAAG;QAC1B;yDACA;QAAC;QAAQ;QAAa;KAAgB;IAGxC,6BAA6B;IAC7B,MAAM,yBAAyB,IAAA,yMAAW;+DAAC;YACzC,eAAe,OAAO,GAAG;QAC3B;8DAAG,EAAE;IAEL,MAAM,uBAAuB,IAAA,yMAAW;6DACtC,CAAC;YACC,eAAe,OAAO,GAAG;YAEzB,IAAI,WAAW,YAAY;YAE3B,gBAAgB;YAChB,MAAM,OAAO,EAAE,IAAI;YACnB,IAAI,MAAM;gBACR,SAAS;gBACT,KAAK,MAAM,QAAQ,KAAM;oBACvB,YAAY;gBACd;YACF;YAEA,UAAU;YACV,MAAM,SAAS,EAAE,MAAM;YACvB,OAAO,KAAK,GAAG;YACf,cAAc,OAAO,GAAG;QAC1B;4DACA;QAAC;QAAQ;KAAY;IAGvB,0BAA0B;IAC1B,MAAM,gBAAgB,IAAA,yMAAW;sDAC/B,CAAC;YACC,cAAc;YACd,IAAI,eAAe,OAAO,EAAE;YAE5B,IAAI,WAAW,YAAY;YAE3B,eAAe;YACf,IAAI,EAAE,GAAG,KAAK,aAAa;gBACzB,EAAE,cAAc;gBAChB;gBACA,MAAM,SAAS,EAAE,MAAM;gBACvB,OAAO,KAAK,GAAG;gBACf,cAAc,OAAO,GAAG;gBACxB;YACF;YAEA,qBAAqB;YACrB,IAAI,EAAE,GAAG,KAAK,WAAW,SAAS,IAAI,KAAK,SAAS;gBAClD,EAAE,cAAc;gBAChB,YAAY;gBACZ,MAAM,SAAS,EAAE,MAAM;gBACvB,OAAO,KAAK,GAAG;gBACf,cAAc,OAAO,GAAG;gBACxB;YACF;QACF;qDACA;QAAC;QAAQ,SAAS,IAAI;QAAE;QAAiB;KAAY;IAGvD,OAAO;QACL,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QAEA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QAEA,cAAc;QACd,eAAe;YACb,UAAU;YACV,oBAAoB;YACpB,kBAAkB;YAClB,WAAW;QACb;IACF;AACF;GArOgB;;QAqBV,2MAAc"}},
    {"offset": {"line": 1247, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/components/TextDisplay.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useMemo, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { normalizeSpecialChars } from '../utils/wpmCalculator';\n\ninterface TextDisplayProps {\n  targetText: string;\n  displayText: string; // 处理后的文本（用于显示和比较）\n  typedText: string;\n  status: 'idle' | 'running' | 'finished';\n  mode: 'english' | 'chinese' | 'coder';\n  inputRef: React.RefObject<HTMLInputElement | null>;\n  inputHandlers: {\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    onCompositionStart: () => void;\n    onCompositionEnd: (e: React.CompositionEvent<HTMLInputElement>) => void;\n    onKeyDown: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n  };\n}\n\n// 单个字符组件\nconst Character = memo(function Character({\n  char,\n  status,\n  index,\n}: {\n  char: string;\n  status: 'pending' | 'correct' | 'incorrect' | 'current';\n  index: number;\n}) {\n  const baseClass = 'inline-block transition-colors duration-100';\n\n  const statusClasses = {\n    pending: 'text-gray-500',\n    correct: 'text-emerald-400',  // 浅绿色 - 正确\n    incorrect: 'text-red-400',     // 浅红色 - 错误\n    current: 'text-white bg-teal-500/30 border-b-2 border-teal-400',\n  };\n\n  // 处理空格和换行显示\n  let displayChar = char;\n  if (char === ' ') displayChar = '\\u00A0';\n  if (char === '\\n') displayChar = '↵'; // 程序员模式显示换行符\n\n  return (\n    <motion.span\n      className={`${baseClass} ${statusClasses[status]}`}\n      initial={status === 'correct' ? { scale: 1.1 } : false}\n      animate={{ scale: 1 }}\n      transition={{ duration: 0.1 }}\n    >\n      {displayChar}\n    </motion.span>\n  );\n});\n\nexport function TextDisplay({ targetText, displayText, typedText, status, mode, inputRef, inputHandlers }: TextDisplayProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const cursorRef = useRef<HTMLSpanElement>(null);\n\n  // 自动聚焦并定位input\n  useEffect(() => {\n    if (inputRef.current && status !== 'finished') {\n      inputRef.current.focus();\n    }\n  }, [status, inputRef]);\n\n  // 计算每个字符的状态 - 使用 displayText 进行比较\n  const characters = useMemo(() => {\n    // 1. 特殊字符标准化 - 确保符号正确匹配\n    let normalizedDisplay = normalizeSpecialChars(displayText);\n    let normalizedTyped = normalizeSpecialChars(typedText);\n\n    // 2. Unicode 标准化 - 确保中文字符比较正确\n    normalizedDisplay = normalizedDisplay.normalize('NFC');\n    normalizedTyped = normalizedTyped.normalize('NFC');\n\n    return normalizedDisplay.split('').map((char, index) => {\n      let charStatus: 'pending' | 'correct' | 'incorrect' | 'current';\n\n      if (index < normalizedTyped.length) {\n        // 已输入的字符\n        charStatus = normalizedTyped[index] === char ? 'correct' : 'incorrect';\n      } else if (index === normalizedTyped.length && status !== 'finished') {\n        // 当前待输入的字符\n        charStatus = 'current';\n      } else {\n        // 未输入的字符\n        charStatus = 'pending';\n      }\n\n      return { char, status: charStatus, index };\n    });\n  }, [displayText, typedText, status]);\n\n  // 计算当前应该显示的两行内容（优化版：真正的两行滚动）\n  const displayLines = useMemo(() => {\n    if (mode === 'coder') {\n      // 程序员模式：显示两行代码 - 使用 displayText\n      const lines = displayText.split('\\n');\n      let charCount = 0;\n      let currentLineIndex = 0;\n\n      // 找到当前输入位置所在的行\n      for (let i = 0; i < lines.length; i++) {\n        const lineLength = lines[i].length + (i < lines.length - 1 ? 1 : 0); // +1 for \\n\n\n        if (charCount + lineLength > typedText.length) {\n          currentLineIndex = i;\n          break;\n        }\n        charCount += lineLength;\n      }\n\n      // 显示当前行和下一行\n      const line1 = lines[currentLineIndex] || '';\n      const line2 = lines[currentLineIndex + 1] || '';\n\n      let line1Start = 0;\n      for (let i = 0; i < currentLineIndex; i++) {\n        line1Start += lines[i].length + 1; // +1 for \\n\n\n      }\n\n      return {\n        line1,\n        line2,\n        line1Start,\n        line2Start: line1Start + line1.length + (line2 ? 1 : 0)\n      };\n    } else {\n      // 英文和中文模式：两行滚动显示，单词不截断 - 使用 displayText\n      const words = mode === 'english' ? displayText.split(' ') : displayText.split('');\n      const separator = mode === 'english' ? ' ' : '';\n      const maxCharsPerLine = mode === 'english' ? 55 : 35;\n\n      // 将所有单词分成多行（每行不超过最大字符数）\n      const allLines: { text: string; startIndex: number }[] = [];\n      let currentLine: string[] = [];\n      let currentLineLength = 0;\n      let charIndex = 0;\n\n      for (let i = 0; i < words.length; i++) {\n        const word = words[i];\n        const wordWithSeparator = word + (mode === 'english' && i < words.length - 1 ? ' ' : '');\n        const wordLength = wordWithSeparator.length;\n\n        // 检查是否需要换行\n        if (currentLine.length > 0 && currentLineLength + wordLength > maxCharsPerLine) {\n          // 保存当前行\n          const lineStartIndex = charIndex - currentLineLength;\n          allLines.push({\n            text: currentLine.join(separator),\n            startIndex: lineStartIndex\n          });\n\n          // 开始新行\n          currentLine = [word];\n          currentLineLength = wordLength;\n        } else {\n          // 继续当前行\n          currentLine.push(word);\n          currentLineLength += wordLength;\n        }\n\n        charIndex += wordLength;\n      }\n\n      // 添加最后一行\n      if (currentLine.length > 0) {\n        const lineStartIndex = charIndex - currentLineLength;\n        allLines.push({\n          text: currentLine.join(separator),\n          startIndex: lineStartIndex\n        });\n      }\n\n      // 找到当前输入位置所在的行\n      let currentLineIndex = 0;\n      for (let i = 0; i < allLines.length; i++) {\n        const line = allLines[i];\n        const lineEndIndex = line.startIndex + line.text.length + (mode === 'english' && i < allLines.length - 1 ? 1 : 0);\n\n        if (typedText.length < lineEndIndex) {\n          currentLineIndex = i;\n          break;\n        }\n      }\n\n      // 返回当前行和下一行\n      const line1 = allLines[currentLineIndex] || { text: '', startIndex: 0 };\n      const line2 = allLines[currentLineIndex + 1] || { text: '', startIndex: line1.startIndex + line1.text.length + (mode === 'english' ? 1 : 0) };\n\n      return {\n        line1: line1.text,\n        line2: line2.text,\n        line1Start: line1.startIndex,\n        line2Start: line2.startIndex,\n      };\n    }\n  }, [displayText, typedText, mode]);\n\n  // 为两行中的每个字符添加状态\n  const renderLine = (lineText: string, startOffset: number) => {\n    return lineText.split('').map((char, i) => {\n      const globalIndex = startOffset + i;\n      const charData = characters[globalIndex];\n      if (!charData) return null;\n\n      // 如果是当前字符，添加ref用于定位input\n      const isCurrent = charData.status === 'current';\n\n      return (\n        <span key={globalIndex} ref={isCurrent ? cursorRef : null} className=\"relative inline-block\">\n          <Character\n            char={char}\n            status={charData.status}\n            index={globalIndex}\n          />\n        </span>\n      );\n    });\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* 提示文字 */}\n      {status === 'idle' && (\n        <motion.div\n          className=\"absolute -top-8 left-0 text-sm text-gray-400\"\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n        >\n          开始输入以开始测试...\n        </motion.div>\n      )}\n\n      {/* 隐藏input - 定位在当前光标处 */}\n      <input\n        ref={inputRef}\n        type=\"text\"\n        className=\"absolute opacity-0 pointer-events-auto caret-transparent\"\n        style={{\n          position: 'absolute',\n          left: cursorRef.current?.offsetLeft || 0,\n          top: cursorRef.current?.offsetTop || 0,\n          width: '1px',\n          height: '1em',\n          zIndex: 10,\n        }}\n        autoComplete=\"off\"\n        autoCorrect=\"off\"\n        autoCapitalize=\"off\"\n        spellCheck=\"false\"\n        {...inputHandlers}\n      />\n\n      {/* 文本显示区域 - 固定两行 */}\n      <div\n        ref={containerRef}\n        className={`\n          relative\n          font-mono leading-relaxed\n          p-6 rounded-xl\n          bg-gray-900/50 backdrop-blur-sm\n          border border-gray-800\n          select-none\n          ${mode === 'coder' ? 'text-lg md:text-xl' : 'text-xl md:text-2xl'}\n        `}\n        onClick={() => inputRef.current?.focus()}\n      >\n        {/* 第一行 */}\n        <div className=\"min-h-[2.5rem] mb-2\">\n          {renderLine(displayLines.line1, displayLines.line1Start)}\n        </div>\n\n        {/* 第二行 */}\n        <div className=\"min-h-[2.5rem] text-gray-500\">\n          {renderLine(displayLines.line2, displayLines.line2Start)}\n        </div>\n      </div>\n\n      {/* 模式提示 */}\n      <div className=\"mt-2 text-xs text-gray-600 text-center\">\n        {mode === 'coder' && '程序员模式：每行是一行代码'}\n        {mode === 'english' && '英文模式：单词不会被截断'}\n        {mode === 'chinese' && '中文模式'}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/components/StatsDisplay.tsx"],"sourcesContent":["'use client';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { TypingMode } from '@/lib/constants';\n\ninterface StatsDisplayProps {\n  mode: TypingMode;\n  wpm: number;\n  cpm: number;\n  lpm: number;\n  accuracy: number;\n  timeLeft: number;\n  status: 'idle' | 'running' | 'finished';\n}\n\nexport function StatsDisplay({ mode, wpm, cpm, lpm, accuracy, timeLeft, status }: StatsDisplayProps) {\n  // 根据模式决定显示哪些指标\n  const getSpeedStats = () => {\n    switch (mode) {\n      case 'english':\n        // 英文：显示 WPM 和 CPM\n        return [\n          { value: wpm, label: 'WPM', sublabel: '单词/分钟' },\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟' },\n        ];\n      case 'chinese':\n        // 中文：只显示 CPM\n        return [\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟' },\n        ];\n      case 'coder':\n        // 代码：显示 LPM 和 CPM\n        return [\n          { value: lpm, label: 'LPM', sublabel: '行/分钟' },\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟' },\n        ];\n      default:\n        return [{ value: wpm, label: 'WPM', sublabel: '单词/分钟' }];\n    }\n  };\n\n  const speedStats = getSpeedStats();\n\n  return (\n    <div className=\"flex items-center justify-center gap-6 md:gap-12\">\n      {/* 速度指标 - 动态显示 */}\n      {speedStats.map((stat, index) => (\n        <div key={stat.label} className=\"text-center\">\n          <motion.div\n            className=\"text-4xl md:text-6xl font-extrabold text-teal-400 tracking-tighter tabular-nums\"\n            key={stat.value}\n            initial={{ scale: 1.1, opacity: 0.5 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ duration: 0.15 }}\n          >\n            {stat.value}\n          </motion.div>\n          <div className=\"text-xs text-gray-400 mt-1\">{stat.label}</div>\n          <div className=\"text-xs text-gray-500\">{stat.sublabel}</div>\n        </div>\n      ))}\n\n      {/* 时间 */}\n      <div className=\"text-center\">\n        <motion.div\n          className={`text-4xl md:text-6xl font-extrabold tracking-tighter tabular-nums ${timeLeft <= 10 && status === 'running' ? 'text-red-400' : 'text-white'\n            }`}\n          key={timeLeft}\n          initial={timeLeft <= 10 ? { scale: 1.1 } : false}\n          animate={{ scale: 1 }}\n          transition={{ duration: 0.1 }}\n        >\n          {timeLeft}\n        </motion.div>\n        <div className=\"text-xs text-gray-400 mt-1\">SEC</div>\n        <div className=\"text-xs text-gray-500\">秒</div>\n      </div>\n\n      {/* 准确率 */}\n      <div className=\"text-center\">\n        <motion.div\n          className={`text-4xl md:text-6xl font-extrabold tracking-tighter tabular-nums ${accuracy < 90 ? 'text-yellow-400' : 'text-emerald-400'\n            }`}\n          key={accuracy}\n          initial={{ scale: 1.05 }}\n          animate={{ scale: 1 }}\n          transition={{ duration: 0.15 }}\n        >\n          {accuracy}\n        </motion.div>\n        <div className=\"text-xs text-gray-400 mt-1\">ACC%</div>\n        <div className=\"text-xs text-gray-500\">准确率</div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAeO,SAAS,aAAa,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAqB;IACjG,eAAe;IACf,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,kBAAkB;gBAClB,OAAO;oBACL;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAQ;oBAC9C;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAQ;iBAC/C;YACH,KAAK;gBACH,aAAa;gBACb,OAAO;oBACL;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAQ;iBAC/C;YACH,KAAK;gBACH,kBAAkB;gBAClB,OAAO;oBACL;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAO;oBAC7C;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAQ;iBAC/C;YACH;gBACE,OAAO;oBAAC;wBAAE,OAAO;wBAAK,OAAO;wBAAO,UAAU;oBAAQ;iBAAE;QAC5D;IACF;IAEA,MAAM,aAAa;IAEnB,qBACE,0NAAC;QAAI,WAAU;;YAEZ,WAAW,GAAG,CAAC,CAAC,MAAM,sBACrB,0NAAC;oBAAqB,WAAU;;sCAC9B,0NAAC,oOAAM,CAAC,GAAG;4BACT,WAAU;4BAEV,SAAS;gCAAE,OAAO;gCAAK,SAAS;4BAAI;4BACpC,SAAS;gCAAE,OAAO;gCAAG,SAAS;4BAAE;4BAChC,YAAY;gCAAE,UAAU;4BAAK;sCAE5B,KAAK,KAAK;2BALN,KAAK,KAAK;;;;;sCAOjB,0NAAC;4BAAI,WAAU;sCAA8B,KAAK,KAAK;;;;;;sCACvD,0NAAC;4BAAI,WAAU;sCAAyB,KAAK,QAAQ;;;;;;;mBAX7C,KAAK,KAAK;;;;;0BAgBtB,0NAAC;gBAAI,WAAU;;kCACb,0NAAC,oOAAM,CAAC,GAAG;wBACT,WAAW,CAAC,kEAAkE,EAAE,YAAY,MAAM,WAAW,YAAY,iBAAiB,cACtI;wBAEJ,SAAS,YAAY,KAAK;4BAAE,OAAO;wBAAI,IAAI;wBAC3C,SAAS;4BAAE,OAAO;wBAAE;wBACpB,YAAY;4BAAE,UAAU;wBAAI;kCAE3B;uBALI;;;;;kCAOP,0NAAC;wBAAI,WAAU;kCAA6B;;;;;;kCAC5C,0NAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAIzC,0NAAC;gBAAI,WAAU;;kCACb,0NAAC,oOAAM,CAAC,GAAG;wBACT,WAAW,CAAC,kEAAkE,EAAE,WAAW,KAAK,oBAAoB,oBAChH;wBAEJ,SAAS;4BAAE,OAAO;wBAAK;wBACvB,SAAS;4BAAE,OAAO;wBAAE;wBACpB,YAAY;4BAAE,UAAU;wBAAK;kCAE5B;uBALI;;;;;kCAOP,0NAAC;wBAAI,WAAU;kCAA6B;;;;;;kCAC5C,0NAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAI/C;KAhFgB"}},
    {"offset": {"line": 1793, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/components/ui/Button.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, ButtonHTMLAttributes } from 'react';\nimport { motion } from 'framer-motion';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  children: ReactNode;\n}\n\nexport function Button({\n  variant = 'primary',\n  size = 'md',\n  children,\n  className = '',\n  ...props\n}: ButtonProps) {\n  const baseClass = `\n    inline-flex items-center justify-center\n    font-medium rounded-lg\n    transition-all duration-200\n    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900\n    disabled:opacity-50 disabled:cursor-not-allowed\n  `;\n\n  const variantClasses = {\n    primary: 'bg-teal-500 hover:bg-teal-400 text-white focus:ring-teal-500',\n    secondary: 'bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500',\n    ghost: 'bg-transparent hover:bg-gray-800 text-gray-300 focus:ring-gray-500',\n  };\n\n  const sizeClasses = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n\n  return (\n    <motion.button\n      className={`${baseClass} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      {...(props as any)}\n    >\n      {children}\n    </motion.button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAWO,SAAS,OAAO,EACrB,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,QAAQ,EACR,YAAY,EAAE,EACd,GAAG,OACS;IACZ,MAAM,YAAY,CAAC;;;;;;EAMnB,CAAC;IAED,MAAM,iBAAiB;QACrB,SAAS;QACT,WAAW;QACX,OAAO;IACT;IAEA,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,0NAAC,oOAAM,CAAC,MAAM;QACZ,WAAW,GAAG,UAAU,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QACtF,YAAY;YAAE,OAAO;QAAK;QAC1B,UAAU;YAAE,OAAO;QAAK;QACvB,GAAI,KAAK;kBAET;;;;;;AAGP;KArCgB"}},
    {"offset": {"line": 1846, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/components/WpmChart.tsx"],"sourcesContent":["'use client';\n\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Area,\n  AreaChart,\n} from 'recharts';\nimport { WpmHistoryPoint } from '../store/typingStore';\n\ninterface WpmChartProps {\n  data: WpmHistoryPoint[];\n}\n\nexport function WpmChart({ data }: WpmChartProps) {\n  if (data.length < 2) {\n    return (\n      <div className=\"h-48 flex items-center justify-center text-gray-500\">\n        Not enough data to display chart\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-48 w-full\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <AreaChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\n          <defs>\n            <linearGradient id=\"wpmGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop offset=\"5%\" stopColor=\"#14b8a6\" stopOpacity={0.3} />\n              <stop offset=\"95%\" stopColor=\"#14b8a6\" stopOpacity={0} />\n            </linearGradient>\n          </defs>\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n          <XAxis\n            dataKey=\"time\"\n            stroke=\"#6b7280\"\n            fontSize={12}\n            tickFormatter={(value) => `${value}s`}\n          />\n          <YAxis stroke=\"#6b7280\" fontSize={12} />\n          <Tooltip\n            contentStyle={{\n              backgroundColor: '#1f2937',\n              border: '1px solid #374151',\n              borderRadius: '8px',\n              color: '#fff',\n            }}\n            labelFormatter={(value) => `Time: ${value}s`}\n            formatter={(value: number, name: string) => [\n              value,\n              name === 'wpm' ? 'WPM' : 'Accuracy %',\n            ]}\n          />\n          <Area\n            type=\"monotone\"\n            dataKey=\"wpm\"\n            stroke=\"#14b8a6\"\n            strokeWidth={2}\n            fill=\"url(#wpmGradient)\"\n          />\n        </AreaChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAmBO,SAAS,SAAS,EAAE,IAAI,EAAiB;IAC9C,IAAI,KAAK,MAAM,GAAG,GAAG;QACnB,qBACE,0NAAC;YAAI,WAAU;sBAAsD;;;;;;IAIzE;IAEA,qBACE,0NAAC;QAAI,WAAU;kBACb,cAAA,0NAAC,0NAAmB;YAAC,OAAM;YAAO,QAAO;sBACvC,cAAA,0NAAC,kMAAS;gBAAC,MAAM;gBAAM,QAAQ;oBAAE,KAAK;oBAAI,OAAO;oBAAI,MAAM;oBAAG,QAAQ;gBAAE;;kCACtE,0NAAC;kCACC,cAAA,0NAAC;4BAAe,IAAG;4BAAc,IAAG;4BAAI,IAAG;4BAAI,IAAG;4BAAI,IAAG;;8CACvD,0NAAC;oCAAK,QAAO;oCAAK,WAAU;oCAAU,aAAa;;;;;;8CACnD,0NAAC;oCAAK,QAAO;oCAAM,WAAU;oCAAU,aAAa;;;;;;;;;;;;;;;;;kCAGxD,0NAAC,8MAAa;wBAAC,iBAAgB;wBAAM,QAAO;;;;;;kCAC5C,0NAAC,8LAAK;wBACJ,SAAQ;wBACR,QAAO;wBACP,UAAU;wBACV,eAAe,CAAC,QAAU,GAAG,MAAM,CAAC,CAAC;;;;;;kCAEvC,0NAAC,8LAAK;wBAAC,QAAO;wBAAU,UAAU;;;;;;kCAClC,0NAAC,kMAAO;wBACN,cAAc;4BACZ,iBAAiB;4BACjB,QAAQ;4BACR,cAAc;4BACd,OAAO;wBACT;wBACA,gBAAgB,CAAC,QAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;wBAC5C,WAAW,CAAC,OAAe,OAAiB;gCAC1C;gCACA,SAAS,QAAQ,QAAQ;6BAC1B;;;;;;kCAEH,0NAAC,4LAAI;wBACH,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,aAAa;wBACb,MAAK;;;;;;;;;;;;;;;;;;;;;;AAMjB;KAnDgB"}},
    {"offset": {"line": 2004, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/components/ResultsCard.tsx"],"sourcesContent":["'use client';\n\nimport { motion } from 'framer-motion';\nimport { Button } from '@/components/ui/Button';\nimport { WpmChart } from './WpmChart';\nimport { WpmHistoryPoint } from '../store/typingStore';\nimport { TypingMode } from '@/lib/constants';\n\ninterface ResultsCardProps {\n  mode: TypingMode;\n  wpm: number;\n  cpm: number;\n  lpm: number;\n  accuracy: number;\n  correctChars: number;\n  errors: number;\n  wpmHistory: WpmHistoryPoint[];\n  duration: number;\n  onRestart: () => void;\n}\n\nexport function ResultsCard({\n  mode,\n  wpm,\n  cpm,\n  lpm,\n  accuracy,\n  correctChars,\n  errors,\n  wpmHistory,\n  duration,\n  onRestart,\n}: ResultsCardProps) {\n  // 根据模式决定显示哪些速度指标\n  const getSpeedStats = () => {\n    switch (mode) {\n      case 'english':\n        return [\n          { value: wpm, label: 'WPM', sublabel: '单词/分钟', color: 'text-teal-400' },\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟', color: 'text-cyan-400' },\n        ];\n      case 'chinese':\n        return [\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟', color: 'text-teal-400' },\n        ];\n      case 'coder':\n        return [\n          { value: lpm, label: 'LPM', sublabel: '行/分钟', color: 'text-teal-400' },\n          { value: cpm, label: 'CPM', sublabel: '字符/分钟', color: 'text-cyan-400' },\n        ];\n      default:\n        return [{ value: wpm, label: 'WPM', sublabel: '单词/分钟', color: 'text-teal-400' }];\n    }\n  };\n\n  const speedStats = getSpeedStats();\n\n  return (\n    <motion.div\n      className=\"\n        bg-gray-900/80 backdrop-blur-lg\n        border border-gray-700/50\n        rounded-2xl p-8\n        shadow-2xl shadow-teal-500/10\n        max-w-2xl mx-auto\n      \"\n      initial={{ opacity: 0, y: 50, scale: 0.9 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      transition={{ type: 'spring', duration: 0.5, bounce: 0.3 }}\n    >\n      <motion.h2\n        className=\"text-3xl font-bold text-center text-white mb-8\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.2 }}\n      >\n        测试完成！\n      </motion.h2>\n\n      {/* 主要统计 - 单行显示 */}\n      <div className=\"flex items-center justify-center gap-8 md:gap-12 mb-8 flex-wrap\">\n        {/* 速度指标 - 根据模式显示 */}\n        {speedStats.map((stat, index) => (\n          <motion.div\n            key={stat.label}\n            className=\"text-center\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 + index * 0.1 }}\n          >\n            <div className={`text-5xl md:text-6xl font-extrabold ${stat.color} tabular-nums`}>{stat.value}</div>\n            <div className=\"text-sm text-gray-400 mt-1\">{stat.label}</div>\n            <div className=\"text-xs text-gray-500\">{stat.sublabel}</div>\n          </motion.div>\n        ))}\n\n        {/* 准确率 */}\n        <motion.div\n          className=\"text-center\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 + speedStats.length * 0.1 }}\n        >\n          <div className=\"text-5xl md:text-6xl font-extrabold text-emerald-400 tabular-nums\">{accuracy}%</div>\n          <div className=\"text-sm text-gray-400 mt-1\">ACC%</div>\n          <div className=\"text-xs text-gray-500\">准确率</div>\n        </motion.div>\n\n        {/* 错误数 */}\n        <motion.div\n          className=\"text-center\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 + speedStats.length * 0.1 }}\n        >\n          <div className=\"text-5xl md:text-6xl font-extrabold text-red-400 tabular-nums\">{errors}</div>\n          <div className=\"text-sm text-gray-400 mt-1\">Errors</div>\n          <div className=\"text-xs text-gray-500\">错误</div>\n        </motion.div>\n      </div>\n\n      {/* WPM 曲线图 */}\n      <motion.div\n        className=\"mb-8\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.7 }}\n      >\n        <h3 className=\"text-sm text-gray-400 mb-4\">\n          {mode === 'english' ? 'WPM 变化曲线' : mode === 'coder' ? 'LPM 变化曲线' : 'CPM 变化曲线'}\n        </h3>\n        <WpmChart data={wpmHistory} />\n      </motion.div>\n\n      {/* 重新开始按钮 */}\n      <motion.div\n        className=\"flex justify-center\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.8 }}\n      >\n        <Button size=\"lg\" onClick={onRestart}>\n          再来一次\n        </Button>\n      </motion.div>\n\n      <motion.p\n        className=\"text-center text-gray-500 text-sm mt-4\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.9 }}\n      >\n        按 <kbd className=\"px-2 py-1 bg-gray-800 rounded text-gray-300\">Tab</kbd> +{' '}\n        <kbd className=\"px-2 py-1 bg-gray-800 rounded text-gray-300\">Enter</kbd> 重新开始\n      </motion.p>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2364, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/settings/SettingsPanel.tsx"],"sourcesContent":["'use client';\n\nimport { motion } from 'framer-motion';\nimport {\n  DURATION_OPTIONS,\n  DIFFICULTY_OPTIONS,\n  CHINESE_STYLE_OPTIONS,\n  PROGRAMMING_LANGUAGE_OPTIONS,\n  CHINESE_STYLE_LABELS,\n  PROGRAMMING_LANGUAGE_LABELS,\n  TypingMode,\n  DifficultyLevel,\n  ChineseStyle,\n  ProgrammingLanguage,\n  EnglishOptions\n} from '@/lib/constants';\n\ninterface SettingsPanelProps {\n  duration: number;\n  mode: TypingMode;\n  difficulty: DifficultyLevel;\n  chineseStyle: ChineseStyle;\n  programmingLanguage: ProgrammingLanguage;\n  englishOptions: EnglishOptions;\n  onDurationChange: (duration: number) => void;\n  onModeChange: (mode: TypingMode) => void;\n  onDifficultyChange: (difficulty: DifficultyLevel) => void;\n  onChineseStyleChange: (style: ChineseStyle) => void;\n  onProgrammingLanguageChange: (lang: ProgrammingLanguage) => void;\n  onEnglishOptionsChange: (options: EnglishOptions) => void;\n  disabled?: boolean;\n}\n\nconst modes: { value: TypingMode; label: string; description: string }[] = [\n  { value: 'english', label: 'English', description: 'Common phrases & quotes' },\n  { value: 'chinese', label: '中文', description: '现代文、文言文' },\n  { value: 'coder', label: 'Coder', description: 'Multi-language code' },\n];\n\nconst difficultyLabels: Record<DifficultyLevel, string> = {\n  easy: '简单',\n  medium: '中等',\n  hard: '困难',\n};\n\nexport function SettingsPanel({\n  duration,\n  mode,\n  difficulty,\n  chineseStyle,\n  programmingLanguage,\n  englishOptions,\n  onDurationChange,\n  onModeChange,\n  onDifficultyChange,\n  onChineseStyleChange,\n  onProgrammingLanguageChange,\n  onEnglishOptionsChange,\n  disabled = false,\n}: SettingsPanelProps) {\n  return (\n    <div className=\"space-y-4\">\n      {/* 第一行：时间、模式、难度 */}\n      <div className=\"flex flex-col md:flex-row items-center justify-center gap-6\">\n        {/* 时间选择 */}\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-gray-400 mr-2\">Time:</span>\n          <div className=\"flex gap-1 bg-gray-900/50 rounded-lg p-1\">\n            {DURATION_OPTIONS.map((d) => (\n              <motion.button\n                key={d}\n                onClick={() => !disabled && onDurationChange(d)}\n                className={`\n                  px-3 py-1.5 rounded-md text-sm font-medium\n                  transition-colors duration-200\n                  ${duration === d\n                    ? 'bg-teal-500 text-white'\n                    : 'text-gray-400 hover:text-white hover:bg-gray-800'\n                  }\n                  ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                `}\n                whileHover={!disabled ? { scale: 1.05 } : undefined}\n                whileTap={!disabled ? { scale: 0.95 } : undefined}\n                disabled={disabled}\n              >\n                {d}s\n              </motion.button>\n            ))}\n          </div>\n        </div>\n\n        {/* 分隔线 */}\n        <div className=\"hidden md:block w-px h-8 bg-gray-700\" />\n\n        {/* 模式选择 */}\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-gray-400 mr-2\">Mode:</span>\n          <div className=\"flex gap-1 bg-gray-900/50 rounded-lg p-1\">\n            {modes.map((m) => (\n              <motion.button\n                key={m.value}\n                onClick={() => !disabled && onModeChange(m.value)}\n                className={`\n                  px-3 py-1.5 rounded-md text-sm font-medium\n                  transition-colors duration-200\n                  ${mode === m.value\n                    ? 'bg-teal-500 text-white'\n                    : 'text-gray-400 hover:text-white hover:bg-gray-800'\n                  }\n                  ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                `}\n                whileHover={!disabled ? { scale: 1.05 } : undefined}\n                whileTap={!disabled ? { scale: 0.95 } : undefined}\n                disabled={disabled}\n                title={m.description}\n              >\n                {m.label}\n              </motion.button>\n            ))}\n          </div>\n        </div>\n\n        {/* 分隔线 */}\n        <div className=\"hidden md:block w-px h-8 bg-gray-700\" />\n\n        {/* 难度选择 */}\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-gray-400 mr-2\">Difficulty:</span>\n          <div className=\"flex gap-1 bg-gray-900/50 rounded-lg p-1\">\n            {DIFFICULTY_OPTIONS.map((d) => (\n              <motion.button\n                key={d}\n                onClick={() => !disabled && onDifficultyChange(d)}\n                className={`\n                  px-3 py-1.5 rounded-md text-sm font-medium\n                  transition-colors duration-200\n                  ${difficulty === d\n                    ? 'bg-teal-500 text-white'\n                    : 'text-gray-400 hover:text-white hover:bg-gray-800'\n                  }\n                  ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                `}\n                whileHover={!disabled ? { scale: 1.05 } : undefined}\n                whileTap={!disabled ? { scale: 0.95 } : undefined}\n                disabled={disabled}\n              >\n                {difficultyLabels[d]}\n              </motion.button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* 第二行：英文选项（只在英文模式下显示） */}\n      {mode === 'english' && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"flex items-center justify-center gap-4\"\n        >\n          <span className=\"text-sm text-gray-400\">Options:</span>\n\n          {/* 区分大小写 */}\n          <label className=\"flex items-center gap-2 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={englishOptions.caseSensitive}\n              onChange={(e) =>\n                !disabled &&\n                onEnglishOptionsChange({\n                  ...englishOptions,\n                  caseSensitive: e.target.checked,\n                })\n              }\n              disabled={disabled}\n              className=\"w-4 h-4 rounded border-gray-600 bg-gray-800 text-teal-500 focus:ring-teal-500 focus:ring-offset-gray-900 cursor-pointer\"\n            />\n            <span className=\"text-sm text-gray-300\">区分大小写</span>\n          </label>\n\n          {/* 忽略标点符号 */}\n          <label className=\"flex items-center gap-2 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={englishOptions.ignorePunctuation}\n              onChange={(e) =>\n                !disabled &&\n                onEnglishOptionsChange({\n                  ...englishOptions,\n                  ignorePunctuation: e.target.checked,\n                })\n              }\n              disabled={disabled}\n              className=\"w-4 h-4 rounded border-gray-600 bg-gray-800 text-teal-500 focus:ring-teal-500 focus:ring-offset-gray-900 cursor-pointer\"\n            />\n            <span className=\"text-sm text-gray-300\">忽略标点符号</span>\n          </label>\n        </motion.div>\n      )}\n\n      {/* 中文选项：文体选择 */}\n      {mode === 'chinese' && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"flex items-center gap-2\"\n        >\n          <span className=\"text-sm text-gray-400 mr-2\">文体:</span>\n          <div className=\"flex gap-1 bg-gray-900/50 rounded-lg p-1\">\n            {CHINESE_STYLE_OPTIONS.map((style) => (\n              <motion.button\n                key={style}\n                onClick={() => !disabled && onChineseStyleChange(style)}\n                className={`\n                  px-4 py-1.5 rounded-md text-sm font-medium transition-all\n                  ${chineseStyle === style\n                    ? 'bg-teal-500 text-white shadow-lg shadow-teal-500/50'\n                    : 'text-gray-400 hover:text-white hover:bg-gray-800/50'\n                  }\n                  ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                `}\n                whileHover={!disabled ? { scale: 1.05 } : {}}\n                whileTap={!disabled ? { scale: 0.95 } : {}}\n                disabled={disabled}\n              >\n                {CHINESE_STYLE_LABELS[style]}\n              </motion.button>\n            ))}\n          </div>\n        </motion.div>\n      )}\n\n      {/* 代码选项：编程语言选择 */}\n      {mode === 'coder' && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"flex items-center gap-2\"\n        >\n          <span className=\"text-sm text-gray-400 mr-2\">编程语言:</span>\n          <select\n            value={programmingLanguage}\n            onChange={(e) => !disabled && onProgrammingLanguageChange(e.target.value as ProgrammingLanguage)}\n            disabled={disabled}\n            className=\"\n              flex-1 px-4 py-2 rounded-lg\n              bg-gray-900/50 border border-gray-700\n              text-white text-sm\n              focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent\n              disabled:opacity-50 disabled:cursor-not-allowed\n              cursor-pointer\n            \"\n          >\n            {PROGRAMMING_LANGUAGE_OPTIONS.map((lang) => (\n              <option key={lang} value={lang}>\n                {PROGRAMMING_LANGUAGE_LABELS[lang]}\n              </option>\n            ))}\n          </select>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2774, "column": 0}, "map": {"version":3,"sources":["file:///Users/pyu/code/ptype/frontend/src/features/typing-test/TypingTest.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTypingEngine } from '@/features/typing-test/hooks/useTypingEngine';\nimport { TextDisplay } from '@/features/typing-test/components/TextDisplay';\nimport { StatsDisplay } from '@/features/typing-test/components/StatsDisplay';\nimport { ResultsCard } from '@/features/typing-test/components/ResultsCard';\nimport { SettingsPanel } from '@/features/settings/SettingsPanel';\n\nexport function TypingTest() {\n  const {\n    status,\n    targetText,\n    displayText,\n    typedText,\n    wpm,\n    cpm,\n    lpm,\n    accuracy,\n    timeLeft,\n    errors,\n    correctChars,\n    wpmHistory,\n    settings,\n    restart,\n    setDuration,\n    setMode,\n    setDifficulty,\n    setEnglishOptions,\n    setChineseStyle,\n    setProgrammingLanguage,\n    inputHandlers,\n  } = useTypingEngine();\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // 自动聚焦到隐藏的 input\n  useEffect(() => {\n    if (inputRef.current && status !== 'finished') {\n      inputRef.current.focus();\n    }\n  }, [status]);\n\n  // Tab + Enter 快捷键重新开始\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === 'Enter' && e.getModifierState('Tab')) {\n        e.preventDefault();\n        restart();\n        // 重新聚焦\n        setTimeout(() => inputRef.current?.focus(), 0);\n      }\n    },\n    [restart]\n  );\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-950 text-gray-200 flex flex-col\">\n      {/* 头部 */}\n      <header className=\"py-6 px-4\">\n        <motion.h1\n          className=\"text-2xl font-bold text-center text-teal-400\"\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          PType\n        </motion.h1>\n        <motion.p\n          className=\"text-center text-gray-500 text-sm mt-1\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.2 }}\n        >\n          Test your typing speed\n        </motion.p>\n      </header>\n\n      {/* 主内容区 */}\n      <main className=\"flex-1 flex flex-col items-center justify-center px-4 pb-8\">\n        <div className=\"w-full max-w-4xl\">\n          <AnimatePresence mode=\"wait\">\n            {status === 'finished' ? (\n              <ResultsCard\n                key=\"results\"\n                mode={settings.mode}\n                wpm={wpm}\n                cpm={cpm}\n                lpm={lpm}\n                accuracy={accuracy}\n                correctChars={correctChars}\n                errors={errors}\n                wpmHistory={wpmHistory}\n                duration={settings.duration}\n                onRestart={restart}\n              />\n            ) : (\n              <motion.div\n                key=\"typing\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"space-y-8\"\n              >\n                {/* 设置面板 */}\n                <SettingsPanel\n                  duration={settings.duration}\n                  mode={settings.mode}\n                  difficulty={settings.difficulty}\n                  chineseStyle={settings.chineseStyle}\n                  programmingLanguage={settings.programmingLanguage}\n                  englishOptions={settings.englishOptions}\n                  onDurationChange={setDuration}\n                  onModeChange={setMode}\n                  onDifficultyChange={setDifficulty}\n                  onChineseStyleChange={setChineseStyle}\n                  onProgrammingLanguageChange={setProgrammingLanguage}\n                  onEnglishOptionsChange={setEnglishOptions}\n                  disabled={false}\n                />\n\n                {/* 控制按钮 */}\n                <div className=\"flex justify-center gap-4\">\n                  {status === 'running' && (\n                    <motion.button\n                      onClick={restart}\n                      className=\"px-6 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors\"\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                    >\n                      停止并重新开始\n                    </motion.button>\n                  )}\n                  {status === 'idle' && (\n                    <motion.button\n                      onClick={restart}\n                      className=\"px-6 py-2 bg-teal-600 hover:bg-teal-500 text-white rounded-lg transition-colors\"\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                    >\n                      重新生成文本\n                    </motion.button>\n                  )}\n                </div>\n\n                {/* 统计显示 */}\n                <StatsDisplay\n                  mode={settings.mode}\n                  wpm={wpm}\n                  cpm={cpm}\n                  lpm={lpm}\n                  accuracy={accuracy}\n                  timeLeft={timeLeft}\n                  status={status}\n                />\n\n                {/* 文本显示 - 包含输入框 */}\n                <TextDisplay\n                  targetText={targetText}\n                  displayText={displayText}\n                  typedText={typedText}\n                  status={status}\n                  mode={settings.mode}\n                  inputRef={inputRef}\n                  inputHandlers={inputHandlers}\n                />\n\n                {/* 重新开始提示 */}\n                {status === 'running' && (\n                  <motion.div\n                    className=\"text-center text-gray-500 text-sm\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                  >\n                    Press{' '}\n                    <kbd className=\"px-2 py-1 bg-gray-800 rounded text-gray-400\">Tab</kbd>{' '}\n                    +{' '}\n                    <kbd className=\"px-2 py-1 bg-gray-800 rounded text-gray-400\">Enter</kbd>{' '}\n                    to restart\n                  </motion.div>\n                )}\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </main>\n\n      {/* 页脚 */}\n      <footer className=\"py-4 text-center text-gray-600 text-sm\">\n        <p>Built with Next.js, Tailwind CSS & Framer Motion</p>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}